{
  "$schema": "./issuetype_schema.json",
  "key": "SPIKE",
  "name": "Spike",
  "description": "Research or exploration ticket (paired mode)",
  "mode": "paired",
  "glyph": "?",
  "color": "blue",
  "branch_prefix": "spike",
  "project_required": false,
  "agent_prompt": "Review this project and prepare to create an agent for research spikes. The agent works in paired mode, explores the codebase, researches external docs, and documents findings. It should ask questions when uncertain. Output ONLY the agent system prompt.",
  "fields": [
    {
      "name": "id",
      "description": "Unique ticket identifier",
      "type": "string",
      "required": true,
      "auto": "id",
      "display_order": 0,
      "user_editable": false
    },
    {
      "name": "scope",
      "description": "Scope of the spike",
      "type": "enum",
      "required": false,
      "default": "global",
      "options": ["global", "adminsvc", "apisvc", "gamesvc", "g", "hushsvc", "uzersvc", "outboundsvc", "www", "iac", "proto", "e2e", "operator"],
      "display_order": 1
    },
    {
      "name": "project",
      "description": "Focused target project (optional)",
      "type": "string",
      "required": false,
      "default": "",
      "placeholder": "Optional project name",
      "display_order": 2
    },
    {
      "name": "priority",
      "description": "Ticket priority level",
      "type": "enum",
      "required": false,
      "default": "P2-medium",
      "options": ["P0-critical", "P1-high", "P2-medium", "P3-low"],
      "display_order": 3
    },
    {
      "name": "status",
      "description": "Ticket status",
      "type": "string",
      "required": true,
      "auto": "status",
      "default": "queued",
      "display_order": 4,
      "user_editable": false
    },
    {
      "name": "created",
      "description": "Creation date",
      "type": "date",
      "required": true,
      "auto": "date",
      "display_order": 5,
      "user_editable": false
    },
    {
      "name": "summary",
      "description": "Research question or topic",
      "type": "string",
      "required": true,
      "default": "",
      "placeholder": "What needs to be researched or explored?",
      "max_length": 120,
      "display_order": 6
    },
    {
      "name": "context",
      "description": "Why is this spike needed? What decision does it inform?",
      "type": "text",
      "required": false,
      "default": "",
      "placeholder": "Background context and what decisions depend on this research",
      "display_order": 7
    },
    {
      "name": "success_criteria",
      "description": "How will we know the spike is complete?",
      "type": "text",
      "required": false,
      "default": "",
      "placeholder": "Questions to answer, deliverables expected",
      "display_order": 8
    }
  ],
  "steps": [
    {
      "name": "explore",
      "display_name": "Exploration",
      "status": "DOING",
      "outputs": ["report"],
      "prompt": "This is a research spike. Work with the operator to explore:\n\n1. Read and understand the research question\n2. Search the codebase for relevant patterns\n3. Research external documentation if needed\n4. Discuss findings with the operator\n\nDocument discoveries in `.tickets/spikes/{{ id }}.md`",
      "allowed_tools": ["Read", "Glob", "Grep", "WebFetch", "WebSearch", "Write"],
      "requires_review": false,
      "next_step": "summarize"
    },
    {
      "name": "summarize",
      "display_name": "Summarizing",
      "status": "AWAIT",
      "outputs": ["report", "ticket"],
      "prompt": "Summarize findings from the spike:\n\n1. Update `.tickets/spikes/{{ id }}.md` with:\n   - Key findings\n   - Recommendations\n   - Trade-offs identified\n   - Open questions\n2. If follow-up work is identified, create ticket(s)",
      "allowed_tools": ["Read", "Write", "Bash"],
      "requires_review": true,
      "on_reject": {
        "goto_step": "explore",
        "prompt": "More research is needed. Continue exploring with the operator."
      },
      "next_step": "done"
    },
    {
      "name": "done",
      "display_name": "Complete",
      "status": "DONE",
      "outputs": ["review"],
      "prompt": "Spike complete. Move ticket to completed.",
      "allowed_tools": ["Bash"],
      "requires_review": false
    }
  ]
}
