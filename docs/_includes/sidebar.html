<nav class="sidebar">
  {% include circle.html %}

  <div class="sidebar-header">
    <a href="{{ '/' | relative_url }}" class="sidebar-title">Operator!</a>
    <p class="sidebar-tagline">A multi-agent orchestration dashboard for AI assisted kanban shaped software development.</p>
    <p class="sidebar-tagline">A project vibe-coded by <b><a href="{{ site.github.author }}" target="_blank">@untra</a></b></p>
  </div>

  <ul class="sidebar-nav">
    <li><a href="{{ '/' | relative_url }}" {% if page.url == '/' %}class="active"{% endif %}>Home</a></li>
    <li><a href="{{ '/getting-started/' | relative_url }}" {% if page.url contains '/getting-started/' %}class="active"{% endif %}>Getting Started</a></li>
    {% for section in site.data.navigation.docs %}
    <li class="nav-section">
      {% assign section_active = false %}
      {% for item in section.children %}
        {% if item.children %}
          {% for grandchild in item.children %}
            {% if page.url contains grandchild.url %}
              {% assign section_active = true %}
            {% endif %}
          {% endfor %}
        {% elsif page.url contains item.url %}
          {% assign section_active = true %}
        {% endif %}
      {% endfor %}
      <details {% if section_active %}open{% endif %}>
        <summary class="nav-parent">{{ section.title }}</summary>
        <ul class="nav-children">
          {% for item in section.children %}
          <li>
            {% if item.children %}
              {% assign item_active = false %}
              {% for grandchild in item.children %}
                {% if page.url contains grandchild.url %}
                  {% assign item_active = true %}
                {% endif %}
              {% endfor %}
              <details {% if item_active %}open{% endif %}>
                <summary>{{ item.title }}</summary>
                <ul class="nav-grandchildren">
                  {% for grandchild in item.children %}
                  <li>
                    <a href="{{ grandchild.url | relative_url }}" {% if page.url contains grandchild.url %}class="active"{% endif %}>{{ grandchild.title }}</a>
                  </li>
                  {% endfor %}
                </ul>
              </details>
            {% else %}
              <a href="{{ item.url | relative_url }}" {% if page.url contains item.url %}class="active"{% endif %}>{{ item.title }}</a>
            {% endif %}
          </li>
          {% endfor %}
        </ul>
      </details>
    </li>
    {% endfor %}
    <li class="downloads-link"><a href="{{ '/downloads/' | relative_url }}" {% if page.url contains '/downloads/' %}class="active"{% endif %}>Downloads</a></li>
  </ul>

  <div class="sidebar-footer">
    <div class="theme-switcher">
      <button id="theme-toggle" aria-label="Toggle theme">
        <span class="theme-icon-light">‚òÄÔ∏è</span>
        <span class="theme-icon-dark">üåô</span>
      </button>
    </div>
    <p><a class="sidebar-nav-item" href="{{ site.github.repo }}"><span class="operator-brand">Operator!</span> GitHub project</a></p>
    <p><a class="sidebar-nav-item" href="{{ site.github.repo }}/tree/main/docs/{{ page.path }}"><small>View this page source on Github</small></a></p>
    <small class="sidebar-nav-item">Currently v{{ site.version }}</small>
    <small class="sidebar-nav-item"><i>Last updated {{ "now" | date: "%Y-%m-%d" }}</i></small>
  </div>
</nav>
